# 1.虚拟滚动

## 1 什么是虚拟滚动

虚拟滚动是一种技术，它通过在浏览器中只渲染当前可见区域内的元素，来提升页面的渲染效率。

## 2 为什么要用虚拟滚动

- 解决渲染效率问题：当数据量过大时，渲染整个列表会导致页面卡顿，而虚拟滚动只渲染当前可见区域内的元素，可以大大提升渲染效率。
- 解决内存占用问题：当数据量过大时，渲染整个列表会导致内存占用过高，而虚拟滚动只渲染当前可见区域内的元素，可以大大减少内存占用。

## 3 虚拟滚动的原理

虚拟滚动的原理是只渲染当前可见区域内的元素，而不是渲染整个列表。

具体实现方式是：

- 首先，创建一个容器元素，设置其宽高和滚动条，并将其添加到页面中。
- 然后，创建一个虚拟列表，将数据渲染到虚拟列表中。
- 最后，将虚拟列表添加到容器元素中，并监听滚动事件，实时更新容器元素的滚动条，以保证当前可见区域内的元素都在容器中。

## 4 虚拟滚动的优缺点

### 4.1 优点

- 解决渲染效率问题：只渲染当前可见区域内的元素，可以大大提升渲染效率。
- 解决内存占用问题：只渲染当前可见区域内的元素，可以大大减少内存占用。

### 4.2 缺点
- 初始渲染时间长：由于要渲染整个列表，所以初始渲染时间长。
- 无法实现局部更新：当数据发生变化时，只能整体更新，无法局部更新。
- 快速滚动的时候会有短暂的白屏和卡顿。

## 5 虚拟滚动的应用场景

- 长列表：比如聊天列表、商品列表等。
- 复杂表格：比如复杂的表格，比如表格有多级表头、合并单元格、固定列、固定表头等。

## 6 虚拟滚动的实现

## 6.1 固定高度

## 6.2 动态变化高度
## 6.1 未知高度